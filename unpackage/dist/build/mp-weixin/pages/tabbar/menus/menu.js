(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/menus/menu"],{1195:function(t,e,i){},"2fcd":function(t,e,i){"use strict";i.r(e);var s=i("9a10"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=o.a},"3bba":function(t,e,i){"use strict";i.r(e);var s=i("de49"),o=i("c5c4");for(var n in o)"default"!==n&&function(t){i.d(e,t,function(){return o[t]})}(n);i("e9db");var a=i("2877"),c=Object(a["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},"3f01":function(t,e,i){"use strict";var s=i("5748"),o=i.n(s);o.a},5748:function(t,e,i){},"5a00":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"UniSwiperDot",props:{info:{type:Array,default:function(){return[]}},current:{type:Number,default:0},dotsStyles:{type:Object,default:function(){return{}}},mode:{type:String,default:"default"},field:{type:String,default:""}},data:function(){return{dots:{width:8,height:8,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}},watch:{dotsStyles:function(t){this.dots=Object.assign(this.dots,this.dotsStyles)},mode:function(t){"indexes"===t?(this.dots.width=20,this.dots.height=20):(this.dots.width=8,this.dots.height=8)}},created:function(){"indexes"===this.mode&&(this.dots.width=20,this.dots.height=20),this.dots=Object.assign(this.dots,this.dotsStyles)}};e.default=s},7784:function(t,e,i){"use strict";i.r(e);var s=i("8650"),o=i("8a8c");for(var n in o)"default"!==n&&function(t){i.d(e,t,function(){return o[t]})}(n);i("c86e");var a=i("2877"),c=Object(a["a"])(o["default"],s["a"],s["b"],!1,null,"476ef958",null);e["default"]=c.exports},7820:function(t,e,i){"use strict";i("8d83");var s=n(i("b0ce")),o=n(i("7784"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(o.default))},8650:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"page-body content-page",style:"height:"+t.height+"px"},[i("scroll-view",{staticClass:"nav-left",style:"height:"+t.height+"px",attrs:{"scroll-y":"","scroll-top":t.scrollLeftTop,"scroll-with-animation":""}},t._l(t.classifyData,function(e,s){return i("view",{key:s,staticClass:"nav-left-item",class:s==t.categoryActive?"active":"",attrs:{eventid:"addeee0c-0-"+s},on:{click:function(e){t.categoryClickMain(s)}}},[t._v(t._s(e.name))])})),i("scroll-view",{staticClass:"nav-right",style:"height:"+t.height+"px",attrs:{"scroll-y":"","scroll-top":t.scrollTop,"scroll-with-animation":"",eventid:"addeee0c-3"},on:{scroll:t.scroll}},t._l(t.classifyData,function(e,s){return i("view",{key:s,staticClass:"box"},t._l(e.foods,function(e,o){return i("view",{key:o,staticClass:"nav-right-item",attrs:{id:0==o?"first":""}},[i("view",{staticClass:"img"},[i("image",{attrs:{src:e.icon,eventid:"addeee0c-1-"+s+"-"+o},on:{click:function(i){i.stopPropagation(),t.cart(e.name)}}})]),i("view",{staticClass:"msg"},[i("view",{staticClass:"title"},[t._v(t._s(e.name))]),i("view",{staticClass:"describe"},[t._v(t._s(e.describe))]),i("view",{staticClass:"add-number"},[i("text",{staticClass:"money"},[t._v("￥"+t._s(e.price))]),i("view",{staticClass:"number"},[i("uni-number-box",{attrs:{value:e.value,min:0,max:9,eventid:"addeee0c-2-"+s+"-"+o,mpcomid:"addeee0c-0-"+s+"-"+o},on:{change:function(i){t.bindChange(i,e)}}})],1)])])])}))})),i("uni-popup",{ref:"popup",staticClass:"uni-popup-box",attrs:{type:"bottom",mpcomid:"addeee0c-3"}},[i("view",{staticClass:"product-detail"},[i("uni-swiper-dot",{staticClass:"runbo",attrs:{info:t.swiperList,current:t.current,mpcomid:"addeee0c-2"}},[i("swiper",{staticClass:"swiper-box",attrs:{eventid:"addeee0c-4"},on:{change:t.changeSwiper}},t._l(t.swiperList,function(e,s){return i("swiper-item",{key:t.index,attrs:{mpcomid:"addeee0c-1-"+s}},[i("image",{attrs:{src:e.url}})])}))],1),i("view",{staticClass:"dish dish-name"},[i("view",{staticClass:"title"},[t._v("辣椒炒肉")]),i("view",{staticClass:"box"},[i("text",{staticClass:"label"},[t._v("做法")]),i("view",{staticClass:"btns"},t._l(t.btns,function(e,s){return i("button",{key:s,class:e.active?"active":"",attrs:{size:"mini",type:"default",eventid:"addeee0c-5-"+s},on:{click:function(e){t.selectDish(s)}}},[t._v(t._s(e.text))])}))]),i("view",{staticClass:"box"},[i("text",{staticClass:"label"},[t._v("醬汁")]),i("view",{staticClass:"btns"},t._l(t.btns,function(e,s){return i("button",{key:s,class:e.active?"active":"",attrs:{size:"mini",type:"default",eventid:"addeee0c-6-"+s},on:{click:function(e){t.selectDish(s)}}},[t._v(t._s(e.text))])}))])]),i("view",{staticClass:"dish dish-detail"},[i("view",{staticClass:"title"},[t._v("菜品詳情")]),i("view",{staticClass:"box"},[t._v("湘菜招牌菜味道還不錯 吃了還想吃")])])],1)])],1)},o=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},"8a8c":function(t,e,i){"use strict";i.r(e);var s=i("f595"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=o.a},"9a10":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick(function(){setTimeout(function(){t.ani="uni-"+t.type},30)})},close:function(t){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick(function(){setTimeout(function(){e.showPopup=!1},300)}))}}};e.default=s},c21d:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t.showLoading({title:"加载中..."});var i="https://www.easy-mock.com/mock/5d8ebb4b1c2da8652b7680b2/cyms",s=function(e,s){var o={url:i+e.url,data:s,method:e.method,header:"get"==e.method?{"X-Requested-Width":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{"X-Requested-Width":"XMALHttpRequest","content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},dataType:"json"},n=new Promise(function(e,i){t.request(o).then(function(t){e(t[1])}).catch(function(t){i(t)})});return t.hideLoading(),n},o={baseUrl:i,httpRequest:s};e.default=o}).call(this,i("543d")["default"])},c5c4:function(t,e,i){"use strict";i.r(e);var s=i("5a00"),o=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=o.a},c86e:function(t,e,i){"use strict";var s=i("e83f"),o=i.n(s);o.a},dba4:function(t,e,i){"use strict";i.r(e);var s=i("f199"),o=i("2fcd");for(var n in o)"default"!==n&&function(t){i.d(e,t,function(){return o[t]})}(n);i("3f01");var a=i("2877"),c=Object(a["a"])(o["default"],s["a"],s["b"],!1,null,null,null);e["default"]=c.exports},de49:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"uni-swiper__warp"},[t._t("default",null,{mpcomid:"132b8f3c-0"}),"default"===t.mode?i("view",{staticClass:"uni-swiper__dots-box",style:{bottom:t.dots.bottom+"px"}},t._l(t.info,function(e,s){return i("view",{key:s,staticClass:"uni-swiper__dots-item uni-swiper__dots-bar",style:{width:(s===t.current?2*t.dots.width:t.dots.width)+"px",height:t.dots.width/3+"px","background-color":s!==t.current?t.dots.backgroundColor:t.dots.selectedBackgroundColor,"border-radius":"0px"}})})):t._e(),"dot"===t.mode?i("view",{staticClass:"uni-swiper__dots-box",style:{bottom:t.dots.bottom+"px"}},t._l(t.info,function(e,s){return i("view",{key:s,staticClass:"uni-swiper__dots-item",style:{width:t.dots.width+"px",height:t.dots.height+"px","background-color":s!==t.current?t.dots.backgroundColor:t.dots.selectedBackgroundColor,border:s!==t.current?t.dots.border:t.dots.selectedBorder}})})):t._e(),"round"===t.mode?i("view",{staticClass:"uni-swiper__dots-box",style:{bottom:t.dots.bottom+"px"}},t._l(t.info,function(e,s){return i("view",{key:s,staticClass:"uni-swiper__dots-item ",class:[s===t.current&&"uni-swiper__dots-long"],style:{width:(s===t.current?3*t.dots.width:t.dots.width)+"px",height:t.dots.height+"px","background-color":s!==t.current?t.dots.backgroundColor:t.dots.selectedBackgroundColor,border:s!==t.current?t.dots.border:t.dots.selectedBorder}})})):t._e(),"nav"===t.mode?i("view",{staticClass:"uni-swiper__dots-box uni-swiper__dots-nav",style:{"background-color":t.dotsStyles.backgroundColor}},[i("view",{staticClass:"uni-swiper__dots-nav-item",style:{color:t.dotsStyles.color}},[t._v(t._s(t.current+1+"/"+t.info.length)+"\n        "+t._s(t.info[t.current][t.field]))])]):t._e(),"indexes"===t.mode?i("view",{staticClass:"uni-swiper__dots-box",style:{bottom:t.dots.bottom+"px"}},t._l(t.info,function(e,s){return i("view",{key:s,staticClass:"uni-swiper__dots-item uni-swiper__dots-indexes",style:{width:t.dots.width+"px",height:t.dots.height+"px",color:s===t.current?t.dots.selectedColor:t.dots.color,"background-color":s!==t.current?t.dots.backgroundColor:t.dots.selectedBackgroundColor,border:s!==t.current?t.dots.border:t.dots.selectedBorder}},[t._v(t._s(s+1))])})):t._e()],2)},o=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},e83f:function(t,e,i){},e9db:function(t,e,i){"use strict";var s=i("1195"),o=i.n(s);o.a},f199:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showPopup?i("view",{staticClass:"uni-popup"},[i("view",{staticClass:"uni-popup__mask",class:[t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],attrs:{eventid:"53e87abc-0"},on:{click:function(e){t.close(!0)}}}),i("view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani,t.animation?"ani":"",t.custom?"":"uni-custom"],attrs:{eventid:"53e87abc-2"},on:{click:function(e){t.close(!0)}}},[i("view",{staticClass:"uni-popup__wrapper-box",attrs:{eventid:"53e87abc-1"},on:{click:function(e){e.stopPropagation(),t.clear(e)}}},[t._t("default",null,{mpcomid:"53e87abc-0"})],2)])]):t._e()},o=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o})},f595:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=c(i("c21d")),o=c(i("1da6")),n=c(i("dba4")),a=c(i("3bba"));function c(t){return t&&t.__esModule?t:{default:t}}var r={components:{uniNumberBox:o.default,uniPopup:n.default,uniSwiper:a.default},data:function(){return{name:"wkiwi",swiperList:[{url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569495006309&di=4e582a3ab43e1a1814472a71fc44b59a&imgtype=0&src=http%3A%2F%2Fpic39.nipic.com%2F20140321%2F18063302_210604412116_2.jpg"},{url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569495006309&di=4e582a3ab43e1a1814472a71fc44b59a&imgtype=0&src=http%3A%2F%2Fpic39.nipic.com%2F20140321%2F18063302_210604412116_2.jpg"},{url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569495006309&di=4e582a3ab43e1a1814472a71fc44b59a&imgtype=0&src=http%3A%2F%2Fpic39.nipic.com%2F20140321%2F18063302_210604412116_2.jpg"}],btns:[{id:"0",text:"清蒸",active:!0},{id:"1",text:"红骚",active:!1},{id:"2",text:"水煮鱼片",active:!1}],current:0,nums:0,height:0,categoryActive:0,scrollTop:0,scrollLeftTop:0,classifyData:null,arr:[0,50,1168,1752,2336,2805,3274,3858,4442,4911,5380,5734,6203,6672,7017],leftItemHeight:51,navLeftHeight:0,diff:0,tabBarHeight:0}},created:function(){},onLoad:function(){},onReady:function(){this.initAjax(),console.log(this.height+" onready")},methods:{initAjax:function(){var e=this,i={url:"/menu",method:"get"};s.default.httpRequest(i).then(function(i){for(var s in e.classifyData=i.data.data,console.log(e.classifyData,e.height),e.classifyData)for(var o in e.classifyData[s].foods)e.classifyData[s].foods[o].value=0;e.$nextTick(function(){e.getHeightList()}),e.height=t.getSystemInfoSync().windowHeight-e.tabBarHeight}).catch(function(t){console.log(t)})},bindChange:function(e,i){for(var s in this.nums=0,i.value=e,this.classifyData)for(var o in this.classifyData[s].foods)this.nums+=this.classifyData[s].foods[o].value;this.$store.commit("cartNumberChange",this.nums),0==this.$store.getters.cartNumber?t.removeTabBarBadge({index:1}):t.setTabBarBadge({index:1,text:""+this.$store.getters.cartNumber})},selectDish:function(t){for(var e in this.btns)this.btns[e].active=!1;this.btns[t].active=!0},getHeightList:function(){var e=this,i=t.createSelectorQuery();i.selectAll(".nav-left-item").boundingClientRect(function(t){e.leftItemHeight=t[0].height,e.navLeftHeight=e.leftItemHeight*classifyData.length,e.diff=e.navLeftHeight-e.height}),i.selectAll(".box").boundingClientRect(function(t){var i=[0],s=0;t.forEach(function(t){s+=t.height,i.push(s)}),console.log(i),e.arr=i}).exec()},scroll:function(t){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){e.scrollHeight=t.detail.scrollTop+1+e.height/2,console.log(e.scrollHeight,e.arr);for(var i=0;i<e.arr.length;i++){var s=e.arr[i],o=e.arr[i+1];if(!o||e.scrollHeight>=s&&e.scrollHeight<o)return e.categoryActive=i,e.diff>0&&(e.scrollLeftTop=Math.round(e.categoryActive*e.diff/(e.classifyData.length-1))),!1}e.categoryActive=0,e.timeoutId=void 0},10)},categoryClickMain:function(t){this.categoryActive=t,this.scrollTop==this.arr[t]?this.scrollTop=this.scrollTop+1:this.scrollTop=this.arr[t],console.log("this.scrollTop: "+this.scrollTop)},cart:function(t){this.$refs.popup.open()}}};e.default=r}).call(this,i("543d")["default"])}},[["7820","common/runtime","common/vendor"]]]);